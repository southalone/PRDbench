# 企业管理人才培训与技能分析系统 - 测试方案说明

## 📋 测试概述

本测试方案基于 `evaluation/metric.json` 中定义的功能评估指标，为企业管理人才培训与技能分析系统生成了完整、可执行的测试套件。

## 🗂 文件结构

```
evaluation/
├── detailed_test_plan.json          # 详细测试计划（JSON格式）
├── metric.json                      # 原始功能评估指标
├── run_tests.py                     # 测试执行脚本
├── 测试说明.md                       # 本文档
├── 
├── # 测试输入文件
├── test_survey.csv                  # CSV格式问卷测试数据
├── test_survey.xlsx                 # Excel格式问卷测试数据
├── test_survey_incomplete.csv       # 包含缺失项的问卷数据
├── test_interview.txt               # 文本格式访谈数据
├── test_interview.docx              # Word格式访谈数据
├── import_excel_input.in            # Excel导入测试输入
├── import_csv_input.in              # CSV导入测试输入
├── import_docx_input.in             # Word导入测试输入
├── import_txt_input.in              # 文本导入测试输入
├── import_incomplete_input.in       # 缺失数据导入测试输入
├── 
├── # 期望输出文件
├── expected_export.csv              # 期望的CSV导出文件
├── expected_export.xlsx             # 期望的Excel导出文件
├── expected_histogram.png           # 期望的直方图
├── expected_boxplot.png             # 期望的箱型图
├── expected_radar.png               # 期望的雷达图
├── expected_chart.png               # 期望的PNG图表
├── expected_chart.svg               # 期望的SVG图表
├── 
└── tests/                           # 自动化测试脚本目录
    ├── conftest.py                  # pytest配置文件
    ├── test_interview_manual.py     # 访谈手动录入测试
    ├── test_sample_filtering.py     # 样本筛选功能测试
    ├── test_metadata_annotation.py  # 元数据标注测试
    ├── test_version_management.py   # 版本管理测试
    ├── test_skill_dimensions.py     # 技能维度测试
    ├── test_custom_dimensions.py    # 自定义维度测试
    ├── test_dashboard.py            # 仪表盘功能测试
    ├── test_dashboard_switching.py  # 仪表盘切换测试
    ├── generate_histogram.py        # 直方图生成脚本
    ├── generate_boxplot.py          # 箱型图生成脚本
    ├── generate_radar.py            # 雷达图生成脚本
    ├── export_chart_png.py          # PNG图表导出脚本
    └── export_chart_svg.py          # SVG图表导出脚本
```

## 🎯 测试用例分类

### 1. Shell交互测试 (shell_interaction)
用于测试需要模拟用户与命令行进行真实交互的功能：

- **1.1 系统启动与基本可用性**
- **2.1.1a 问卷数据导入 - Excel格式支持**
- **2.1.1b 问卷数据导入 - CSV格式支持**
- **2.1.2b 访谈文本导入 - .docx文件上传**
- **2.1.2c 访谈文本导入 - .txt文件上传**
- **2.1.3 数据校验与标记**
- **2.2.3 因子分析引擎执行**
- **2.2.4a 算法参数自定义 - 因子数量**
- **2.2.4b 算法参数自定义 - 旋转方法**
- **2.2.5 统计显著性检验**
- **2.2.6a 多维度数据对比分析 - 分组维度设置**
- **2.2.6b 多维度数据对比分析 - 结果输出**

### 2. 单元测试 (unit_test)
用于测试可以通过直接调用源代码中的特定函数或类来验证的功能：

- **2.1.2a 访谈文本导入 - 手动录入**
- **2.1.4a 样本管理 - 多维度筛选**
- **2.1.4b 样本管理 - 批量元数据标注**
- **2.1.5 历史数据版本管理**
- **2.2.1 预置管理技能维度**
- **2.2.2a 自定义维度与指标 - 新增维度**
- **2.2.2b 自定义维度与指标 - 为维度新增指标及权重**
- **2.4.1a 多维可视化仪表盘 - 技能分布雷达图**
- **2.4.1b 多维可视化仪表盘 - 成长折线图**
- **2.4.1c 多维可视化仪表盘 - 低分预警热力图**
- **2.4.2a 仪表盘多维切换对比 - 时间维度**
- **2.4.2b 仪表盘多维切换对比 - 企业属性维度**
- **2.4.2c 仪表盘多维切换对比 - 管理层级维度**

### 3. 文件比较测试 (file_comparison)
用于验证程序是否生成了正确的输出文件：

- **2.2.7a 对比结果可视化 - 直方图**
- **2.2.7b 对比结果可视化 - 箱型图**
- **2.2.7c 对比结果可视化 - 雷达图**
- **2.4.3a 图表导出功能 - PNG格式**
- **2.4.3b 图表导出功能 - SVG格式**
- **2.4.3c 图表导出功能 - CSV格式原始数据**
- **2.4.3d 图表导出功能 - Excel格式原始数据**

## 🚀 运行测试

### 方法1：运行完整测试套件
```bash
python evaluation/run_tests.py
```

### 方法2：运行特定类型的测试

**运行所有单元测试：**
```bash
pytest evaluation/tests/ -v
```

**运行特定测试文件：**
```bash
pytest evaluation/tests/test_skill_dimensions.py -v
pytest evaluation/tests/test_dashboard.py -v
```

**运行特定测试函数：**
```bash
pytest evaluation/tests/test_skill_dimensions.py::test_preset_skill_dimensions -v
```

### 方法3：运行Shell交互测试

**系统启动测试：**
```bash
python src/app.py
python src/cli.py --help
```

**数据导入测试：**
```bash
python src/cli.py data import-data -f evaluation/test_survey.csv -c "测试企业" -t survey
```

**分析功能测试：**
```bash
python src/cli.py analysis factor -c "测试企业" -f 3 -r varimax
```

### 方法4：运行文件生成测试

**生成可视化图表：**
```bash
python evaluation/tests/generate_histogram.py
python evaluation/tests/generate_boxplot.py
python evaluation/tests/generate_radar.py
```

**导出图表文件：**
```bash
python evaluation/tests/export_chart_png.py
python evaluation/tests/export_chart_svg.py
```

## 📊 测试数据说明

### 问卷测试数据
- **test_survey.csv / test_survey.xlsx**: 包含8条完整的问卷回答记录
- **test_survey_incomplete.csv**: 包含6条带有缺失项的问卷记录，用于测试数据校验功能

### 访谈测试数据
- **test_interview.txt**: 文本格式的访谈记录
- **test_interview.docx**: Word格式的访谈记录

### 期望输出文件
- **图表文件**: PNG、SVG格式的各种统计图表
- **数据文件**: CSV、Excel格式的导出数据

## 🔧 环境要求

### 基础环境
- Python 3.8+
- pip包管理器

### 必需依赖包
```bash
pip install pytest flask pandas numpy matplotlib scikit-learn factor-analyzer python-docx openpyxl
```

### 可选依赖包
```bash
pip install plotly seaborn jieba loguru
```

## 📈 测试结果解读

### 成功标准
- **Shell交互测试**: 命令执行成功，返回预期输出，无错误信息
- **单元测试**: pytest测试通过，所有断言成功
- **文件比较测试**: 生成的文件与期望文件格式一致，内容正确

### 失败处理
- 检查依赖包是否完整安装
- 确认测试数据文件是否存在
- 查看详细错误信息进行问题定位
- 检查系统环境配置

## 🎯 测试覆盖范围

本测试方案覆盖了系统的以下核心功能：

1. **数据管理** (6个测试用例)
   - 多格式数据导入
   - 数据校验和标记
   - 样本管理和筛选
   - 版本管理

2. **分析功能** (8个测试用例)
   - 因子分析引擎
   - 参数自定义
   - 统计检验
   - 多维度对比

3. **可视化** (9个测试用例)
   - 多种图表类型
   - 仪表盘功能
   - 多维切换
   - 图表导出

总计 **23个测试用例**，全面覆盖系统的主要功能点。

## 💡 使用建议

1. **首次运行**: 建议先运行 `python evaluation/run_tests.py` 获得整体测试结果
2. **问题定位**: 对于失败的测试，可以单独运行对应的测试文件进行详细调试
3. **持续集成**: 可以将测试脚本集成到CI/CD流程中
4. **测试维护**: 随着系统功能更新，及时更新对应的测试用例

---

**测试方案版本**: v1.0.0  
**创建时间**: 2024年1月  
**适用系统**: 企业管理人才培训与技能分析系统 v1.0.0