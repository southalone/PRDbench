# æµ‹è¯•æ–¹æ¡ˆè¯´æ˜æ–‡æ¡£

## æ¦‚è¿°

æœ¬ç›®å½•åŒ…å«äº†å¤§å­¦ç”Ÿè‡ªæ§åŠ›ä¸æ³¨æ„ç¨³å®šæ€§æ™ºèƒ½åˆ†æç³»ç»Ÿçš„å®Œæ•´æµ‹è¯•æ–¹æ¡ˆï¼ŒåŸºäº `evaluation/metric.json` ä¸­å®šä¹‰çš„åŠŸèƒ½è¯„ä¼°æŒ‡æ ‡ç”Ÿæˆã€‚

## æ–‡ä»¶ç»“æ„

```
evaluation/
â”œâ”€â”€ README.md                           # æœ¬è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ metric.json                         # åŠŸèƒ½è¯„ä¼°æŒ‡æ ‡ï¼ˆè¾“å…¥ï¼‰
â”œâ”€â”€ detailed_test_plan.json            # è¯¦ç»†æµ‹è¯•è®¡åˆ’ï¼ˆè¾“å‡ºï¼‰
â”œâ”€â”€ pytest.ini                         # pytesté…ç½®æ–‡ä»¶
â”œâ”€â”€ run_tests.py                       # æµ‹è¯•æ‰§è¡Œè„šæœ¬
â”‚
â”œâ”€â”€ tests/                             # è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ test_scale_creation.py         # é‡è¡¨åˆ›å»ºåŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_scale_import_export.py    # é‡è¡¨å¯¼å…¥å¯¼å‡ºæµ‹è¯•
â”‚   â”œâ”€â”€ test_statistical_analysis.py   # ç»Ÿè®¡åˆ†æåŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_data_management.py        # æ•°æ®ç®¡ç†åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_visualization.py          # å¯è§†åŒ–åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ test_data_export.py           # æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•
â”‚
â”œâ”€â”€ æµ‹è¯•è¾“å…¥æ–‡ä»¶/
â”‚   â”œâ”€â”€ test_scale.csv                 # æµ‹è¯•ç”¨é‡è¡¨CSVæ–‡ä»¶
â”‚   â”œâ”€â”€ test_scale.json                # æµ‹è¯•ç”¨é‡è¡¨JSONæ–‡ä»¶
â”‚   â”œâ”€â”€ test_participants.csv          # æµ‹è¯•ç”¨è¢«è¯•è€…ä¿¡æ¯
â”‚   â”œâ”€â”€ test_responses.csv             # æµ‹è¯•ç”¨é—®å·å›ç­”
â”‚   â””â”€â”€ test_responses_with_anomalies.csv  # åŒ…å«å¼‚å¸¸çš„æµ‹è¯•æ•°æ®
â”‚
â””â”€â”€ æœŸæœ›è¾“å‡ºæ–‡ä»¶/
    â”œâ”€â”€ expected_scale_export.csv      # æœŸæœ›çš„é‡è¡¨å¯¼å‡ºCSV
    â”œâ”€â”€ expected_scale_export.json     # æœŸæœ›çš„é‡è¡¨å¯¼å‡ºJSON
    â”œâ”€â”€ expected_comprehensive_report.html  # æœŸæœ›çš„ç»¼åˆæŠ¥å‘Š
    â””â”€â”€ expected_chart.txt             # æœŸæœ›çš„å›¾è¡¨æ–‡ä»¶å ä½ç¬¦
```

## æµ‹è¯•ç±»å‹

### 1. Shelläº¤äº’æµ‹è¯• (shell_interaction)
- **ç”¨é€”**: æµ‹è¯•å‘½ä»¤è¡Œç•Œé¢çš„ç”¨æˆ·äº¤äº’åŠŸèƒ½
- **ç‰¹ç‚¹**: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œï¼ŒéªŒè¯CLIå‘½ä»¤å’Œäº¤äº’æµç¨‹
- **ç¤ºä¾‹**: ç¨‹åºå¯åŠ¨ã€å¸®åŠ©ä¿¡æ¯æ˜¾ç¤ºã€æ¨¡å—å…¥å£éªŒè¯

### 2. å•å…ƒæµ‹è¯• (unit_test)
- **ç”¨é€”**: æµ‹è¯•ç‰¹å®šå‡½æ•°æˆ–ç±»çš„åŠŸèƒ½
- **ç‰¹ç‚¹**: ç›´æ¥è°ƒç”¨æºä»£ç ï¼ŒéªŒè¯å†…éƒ¨é€»è¾‘
- **ç¤ºä¾‹**: é‡è¡¨åˆ›å»ºã€ç»Ÿè®¡åˆ†æç®—æ³•ã€æ•°æ®å¤„ç†å‡½æ•°

### 3. æ–‡ä»¶æ¯”è¾ƒæµ‹è¯• (file_comparison)
- **ç”¨é€”**: éªŒè¯ç¨‹åºç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶
- **ç‰¹ç‚¹**: æ¯”è¾ƒå®é™…è¾“å‡ºä¸æœŸæœ›è¾“å‡ºçš„ä¸€è‡´æ€§
- **ç¤ºä¾‹**: é‡è¡¨å¯¼å‡ºã€æŠ¥å‘Šç”Ÿæˆã€å›¾è¡¨åˆ›å»º

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. **å®‰è£…ä¾èµ–åŒ…**:
   ```bash
   pip install -r src/requirements.txt
   ```

2. **æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ** (å¦‚æœä½¿ç”¨):
   ```bash
   # Windows
   path\to\venv\Scripts\activate
   
   # Linux/Mac
   source path/to/venv/bin/activate
   ```

### è¿è¡Œæµ‹è¯•

1. **è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶**:
   ```bash
   python evaluation/run_tests.py
   ```

2. **è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•**:
   ```bash
   # åªè¿è¡Œå•å…ƒæµ‹è¯•
   cd evaluation
   pytest tests/ -v
   
   # è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
   pytest tests/test_scale_creation.py -v
   
   # è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
   pytest tests/test_scale_creation.py::test_create_scale_basic_info -v
   ```

3. **è¿è¡ŒShelläº¤äº’æµ‹è¯•**:
   ```bash
   # ç¨‹åºå¯åŠ¨æµ‹è¯•
   python src/main.py --help
   
   # ç³»ç»Ÿåˆå§‹åŒ–
   python src/main.py init
   
   # æŸ¥çœ‹é‡è¡¨åˆ—è¡¨
   python src/main.py scales list
   
   # æ•°æ®æ‘˜è¦
   python src/main.py data summary
   ```

## æµ‹è¯•è¦†ç›–èŒƒå›´

### åŠŸèƒ½æ¨¡å—è¦†ç›–

| æ¨¡å— | æµ‹è¯•æ–‡ä»¶ | è¦†ç›–åŠŸèƒ½ |
|------|----------|----------|
| é‡è¡¨ç®¡ç† | test_scale_creation.py<br>test_scale_import_export.py | é‡è¡¨åˆ›å»ºã€å¯¼å…¥å¯¼å‡ºã€éªŒè¯ |
| æ•°æ®ç®¡ç† | test_data_management.py | è¢«è¯•è€…ç®¡ç†ã€æ•°æ®å¯¼å…¥ã€å¼‚å¸¸æ£€æµ‹ |
| ç»Ÿè®¡åˆ†æ | test_statistical_analysis.py | æè¿°ç»Ÿè®¡ã€ä¿¡åº¦æ•ˆåº¦ã€å› å­åˆ†æã€å›å½’åˆ†æ |
| å¯è§†åŒ– | test_visualization.py | å›¾è¡¨ç”Ÿæˆã€æ ¼å¼å¯¼å‡ºã€äº¤äº’ä»ªè¡¨æ¿ |
| æ•°æ®å¯¼å‡º | test_data_export.py | å¤šæ ¼å¼å¯¼å‡ºã€æ•°æ®å®Œæ•´æ€§éªŒè¯ |

### è¯„ä¼°æŒ‡æ ‡è¦†ç›–

æ ¹æ® `metric.json` ä¸­çš„29ä¸ªè¯„ä¼°ç‚¹ï¼Œæµ‹è¯•æ–¹æ¡ˆæä¾›äº†å®Œæ•´è¦†ç›–ï¼š

- **0.1**: ç¨‹åºå¯åŠ¨ä¸ä¸»èœå• âœ…
- **1.1-1.4**: å„æ¨¡å—å…¥å£ç‚¹éªŒè¯ âœ…
- **2.1.1a-2.1.4b**: é‡è¡¨ç®¡ç†åŠŸèƒ½ âœ…
- **2.2.1a-2.2.3**: æ•°æ®é‡‡é›†ä¸ç®¡ç† âœ…
- **2.3.1-2.3.3**: åŸºæœ¬ç»Ÿè®¡åˆ†æ âœ…
- **2.4.1a-2.4.3b**: é«˜çº§åˆ†æåŠŸèƒ½ âœ…
- **2.5.1-2.5.2e**: æŠ¥å‘Šç”Ÿæˆä¸å¯¼å‡º âœ…

## æµ‹è¯•ç»“æœè§£è¯»

### æˆåŠŸæ ‡å¿—
- âœ… **PASSED**: æµ‹è¯•é€šè¿‡ï¼ŒåŠŸèƒ½æ­£å¸¸
- ğŸ‰ **ALL PASSED**: æ‰€æœ‰æµ‹è¯•é€šè¿‡

### å¤±è´¥æ ‡å¿—
- âŒ **FAILED**: æµ‹è¯•å¤±è´¥ï¼Œéœ€è¦ä¿®å¤
- âš ï¸ **WARNING**: æœ‰è­¦å‘Šï¼Œå»ºè®®æ£€æŸ¥
- â° **TIMEOUT**: æ‰§è¡Œè¶…æ—¶ï¼Œå¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜

### æµ‹è¯•æŠ¥å‘Š
æµ‹è¯•å®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
- `test_results.xml`: JUnitæ ¼å¼çš„æµ‹è¯•ç»“æœ
- `TEST_REPORT.md`: è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ModuleNotFoundError**
   ```
   è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥Pythonè·¯å¾„å’Œä¾èµ–åŒ…å®‰è£…
   pip install -r src/requirements.txt
   ```

2. **æ•°æ®åº“è¿æ¥é”™è¯¯**
   ```
   è§£å†³æ–¹æ¡ˆ: è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–
   python src/main.py init
   ```

3. **æ–‡ä»¶æƒé™é”™è¯¯**
   ```
   è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥ç›®å½•å†™æƒé™ï¼Œæˆ–ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
   ```

4. **æµ‹è¯•è¶…æ—¶**
   ```
   è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥ç³»ç»Ÿèµ„æºï¼Œæˆ–å¢åŠ è¶…æ—¶æ—¶é—´
   ```

### è°ƒè¯•æŠ€å·§

1. **è¯¦ç»†è¾“å‡º**:
   ```bash
   pytest tests/ -v -s
   ```

2. **åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•**:
   ```bash
   pytest tests/ --lf
   ```

3. **åœåœ¨ç¬¬ä¸€ä¸ªå¤±è´¥**:
   ```bash
   pytest tests/ -x
   ```

4. **ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š**:
   ```bash
   pytest tests/ --cov=src --cov-report=html
   ```

## æ‰©å±•æµ‹è¯•

### æ·»åŠ æ–°æµ‹è¯•

1. **åˆ›å»ºæµ‹è¯•æ–‡ä»¶**:
   ```python
   # evaluation/tests/test_new_feature.py
   import pytest
   
   def test_new_functionality():
       # æµ‹è¯•ä»£ç 
       assert True
   ```

2. **æ›´æ–°æµ‹è¯•è®¡åˆ’**:
   åœ¨ `detailed_test_plan.json` ä¸­æ·»åŠ æ–°çš„æµ‹è¯•æ¡ç›®

3. **è¿è¡Œæ–°æµ‹è¯•**:
   ```bash
   pytest tests/test_new_feature.py -v
   ```

### æ€§èƒ½æµ‹è¯•

```python
import time

def test_performance():
    start_time = time.time()
    # æ‰§è¡ŒåŠŸèƒ½
    execution_time = time.time() - start_time
    assert execution_time < 5.0  # 5ç§’å†…å®Œæˆ
```

### å‹åŠ›æµ‹è¯•

```python
def test_large_dataset():
    # åˆ›å»ºå¤§é‡æ•°æ®
    for i in range(1000):
        # æ‰§è¡Œæ“ä½œ
        pass
    # éªŒè¯ç»“æœ
```

## æŒç»­é›†æˆ

### GitHub Actions ç¤ºä¾‹

```yaml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    - name: Install dependencies
      run: pip install -r src/requirements.txt
    - name: Run tests
      run: python evaluation/run_tests.py
```

## è´¡çŒ®æŒ‡å—

1. **æ·»åŠ æµ‹è¯•**: ä¸ºæ–°åŠŸèƒ½ç¼–å†™å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
2. **æ›´æ–°æ–‡æ¡£**: ä¿®æ”¹åŠŸèƒ½æ—¶åŒæ­¥æ›´æ–°æµ‹è¯•æ–‡æ¡£
3. **éµå¾ªè§„èŒƒ**: ä½¿ç”¨ç»Ÿä¸€çš„æµ‹è¯•å‘½åå’Œç»“æ„
4. **éªŒè¯å®Œæ•´æ€§**: ç¡®ä¿æµ‹è¯•è¦†ç›–æ‰€æœ‰å…³é”®è·¯å¾„

## è”ç³»ä¿¡æ¯

å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æµ‹è¯•è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯
2. å‚è€ƒæœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
3. æ£€æŸ¥æºä»£ç ä¸­çš„ç›¸å…³å®ç°
4. æäº¤Issueæˆ–è”ç³»å¼€å‘å›¢é˜Ÿ

---

*æœ¬æµ‹è¯•æ–¹æ¡ˆåŸºäºè½¯ä»¶è´¨é‡ä¿è¯ï¼ˆQAï¼‰æœ€ä½³å®è·µè®¾è®¡ï¼Œç¡®ä¿ç³»ç»ŸåŠŸèƒ½çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚*