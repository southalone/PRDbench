[
  {
    "metric": "0.1 System Startup and Main Menu Display",
    "description": "Execute the startup command. Observe whether the command-line interface starts without errors and displays a main menu with five clearly distinguishable top-level options: 'Data Management', 'Cost Calculation', 'Combo Generation', 'Combo Evaluation', and 'Exit'.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_0.1.in"
    ],
    "expected_output_files": null,
    "expected_output": "Program starts normally and displays the main menu",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_0.1.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.5.2 Menu Navigation and Exit Logic",
    "description": "1. Precondition Check (User Path): Verify that the 'Data Management', 'Cost Calculation', 'Combo Generation', and 'Combo Evaluation' submenus are accessible from the main menu. 2. Preparation: Navigate into the 'Data Management', 'Cost Calculation', 'Combo Generation', and 'Combo Evaluation' submenus respectively. 3. Execution: At each submenu interface, input 'q' and press Enter. 4. Assertion: Verify that after each operation, the program correctly returns to the main menu interface, rather than exiting the program or becoming unresponsive.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.5.2.in"
    ],
    "expected_output_files": null,
    "expected_output": "Able to normally enter each submenu and return to the main menu",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.5.2.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.1a Ingredient CSV Data Successful Import",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Import Ingredient CSV' option. If inaccessible, score 0. 2. Preparation: Create a file named `ingredients.csv` containing 5 rows of data fully compliant with PRD specifications. 3. Execution: Navigate to the 'Import Ingredient CSV' function and enter the path to `ingredients.csv` when prompted. 4. Assertion: Verify if the command line outputs a clear message indicating 'Successfully imported 5 ingredient records'.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.1.1a.csv",
      "evaluation/inputs_for_test_2.1.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts successful import of the specified number of ingredient records",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.1b Ingredient CSV Data Import Failure Validation",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Import Ingredient CSV' option. If inaccessible, score 0. 2. Preparation: Create a file named `bad_ingredients.csv` where the 'Purchase Unit Price' column in the 2nd row contains non-numeric text (e.g., 'abc'). 3. Execution: Attempt to import `bad_ingredients.csv`. 4. Assertion: Verify if the program fails to import and displays a Chinese error message containing keywords such as 'Line 2', 'unit price', or 'format error'.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/bad_ingredients.csv",
      "evaluation/inputs_for_test_2.1.1b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts import failure due to data format error in a specific line",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.1b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.2a Manual Ingredient Entry - Success Path",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Manual Ingredient Entry' option. If inaccessible, score 0. 2. Preparation: Prepare a complete set of valid ingredient data (e.g., I100, Potato, Vegetable, kg, 5, 10). 3. Execution: Enter the 'Manual Ingredient Entry' function and input all prepared valid data step by step as prompted. 4. Assertion: Verify if all data can be successfully entered and if a final 'Ingredient entry successful' prompt is received.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.1.2a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts successful ingredient entry",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.2a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.2b Manual Ingredient Entry - Input Validation",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Manual Ingredient Entry' option. If inaccessible, score 0. 2. Preparation: Enter the 'Manual Ingredient Entry' function. 3. Execution: When prompted for 'Processing Loss Rate (%)', input an invalid value, e.g., '50'. 4. Assertion: Verify if the system displays a Chinese error prompt (containing keywords like 'between 0-30') and allows the user to re-enter this field.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.1.2b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts invalid input value and requests re-entry",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.2b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.3a Ingredient Data Query - By Name",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Query Ingredients' option. If inaccessible, score 0. 2. Preparation: Ensure an ingredient named 'Wuchang Rice' exists in the database. 3. Execution: Enter the 'Query Ingredients' function, select query by name, and input 'Wuchang Rice'. 4. Assertion: Verify if the query result correctly displays all information for 'Wuchang Rice', including unit price, loss rate, remaining stock, etc.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.1.3a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Query results correctly display the complete information for the specified ingredient",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.3a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.3b Ingredient Data Query - By Category",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Query Ingredients' option. If inaccessible, score 0. 2. Preparation: Ensure at least 2 ingredients categorized as 'Staple' exist in the database. 3. Execution: Enter the 'Query Ingredients' function, select query by category, and input 'Staple'. 4. Assertion: Verify if the query result displays a list showing information for all ingredients belonging to the 'Staple food' category.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.1.3b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Query results display a list of all ingredients for the specified category",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.3b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.1.4 Add Additional Cost Item",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Data Management' and confirm the presence of a clearly distinguishable 'Manage Additional Costs' or similar option. 2. Preparation: Enter this function, select 'Add'. 3. Execution: Input the name and amount for the new cost item as prompted. 4. Assertion: Verify if the system displays an 'Add successful' prompt. Furthermore, verify that this new cost item becomes available for selection during the 'Combo Cost Calculation' process.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.1.4.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts successful addition of the additional cost item",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.1.4.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.2.1 Single Ingredient Cost Calculation",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Cost Calculation' and confirm the presence of a clearly distinguishable 'Create New Combo' option. If inaccessible, score 0. 2. Preparation: Assume ingredient 'Wuchang Rice' has a unit price of 10 RMB/kg and a loss rate of 10%. 3. Execution: Enter 'Create New Combo', add ingredient 'Wuchang Rice', input quantity '0.15'. 4. Assertion: Verify if the system calculates the cost for this item as 10 * 0.15 * (1 + 10/100) = 1.65 RMB.",
    "type": "unit_test",
    "input_files": null,
    "expected_output_files": null,
    "expected_output": "Unit test passes",
    "testcases": [
      {
        "test_command": "pytest evaluation/tests/test_cost_calculator.py::test_calculate_ingredient_cost",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.2.2a Total Cost Calculation - Cost Summarization",
    "description": "1. Precondition Check (User Path): Confirm the 'Create New Combo' function is accessible. 2. Preparation: Within a combo, add two ingredients with calculated costs of 1.65 RMB and 5.25 RMB respectively. Packaging box cost is fixed at 1.5 RMB. 3. Execution: Complete ingredient addition and proceed to the cost summary step. 4. Assertion: Verify if the total cost displayed by the system sums to 1.65 + 5.25 + 1.5 = 8.40 RMB.",
    "type": "unit_test",
    "input_files": null,
    "expected_output_files": null,
    "expected_output": "Unit test passes",
    "testcases": [
      {
        "test_command": "pytest evaluation/tests/test_cost_calculator.py::test_calculate_combo_cost",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.2.2b Total Cost Calculation - Dynamic Adjustment",
    "description": "1. Precondition Check (User Path): Confirm the 'Create New Combo' function is accessible and total cost can be calculated. 2. Preparation: In a combo with a total cost of 8.40 RMB, the disposable utensils cost is 0.8 RMB. 3. Execution: When selecting additional cost items, choose 'y' for disposable utensils and 'n' for others. 4. Assertion: Verify if the final total cost is updated to 8.40 + 0.8 = 9.20 RMB.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.4.3.csv",
      "evaluation/inputs_for_test_2.2.2b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Total cost calculated correctly",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.2.2b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.2.3 Cost Detail Report Formatting",
    "description": "1. Precondition Check (User Path): Confirm combo cost can be successfully calculated. 2. Preparation: Complete a combo cost calculation involving at least 2 ingredients. 3. Execution: View the final output cost detail report. 4. Assertion: Verify if the report is presented as a table with clear borders and headers (e.g., Ingredient, Quantity, Cost), and all data columns are vertically aligned.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.4.3.csv",
      "evaluation/inputs_for_test__2.2.2b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Outputs a well-formatted cost detail report",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.2.2b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.3.1a Smart Combo Generation - Parameter Input",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Combo Generation' and confirm access to the function. If inaccessible, score 0. 2. Preparation: Prepare a set of valid generation parameters (e.g., Single Combo, 10% discount (0.9), 30% profit margin, High Stock Priority). 3. Execution: Enter the 'Combo Generation' module and input all valid parameters sequentially. 4. Assertion: Verify that all parameters can be successfully input and the process proceeds to the subsequent combo generation stage, rather than reporting an error or stalling.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Starts generating combos after successful parameter input",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.3.1b Smart Combo Generation - Parameter Validation",
    "description": "1. Precondition Check (User Path): From the main menu, select 'Combo Generation' and confirm access to the function. If inaccessible, score 0. 2. Preparation: Enter the 'Combo Generation' module. 3. Execution: When prompted for 'Discount Rate', input an invalid value '1.1'. 4. Assertion: Verify if the system displays a Chinese error prompt (containing keywords like 'between 0.1-1.0') and requests re-entry.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/inputs_for_test_2.3.1b.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts invalid input value and requests re-entry",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.3.1b.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.3.2 Core Combination Logic and Nutritional Constraints",
    "description": "1. Precondition Check (User Path): Confirm the 'Combo Generation' function is accessible and parameters can be input. 2. Preparation: Ensure the ingredient library contains sufficient ingredients in the Staple, Protein, and Vegetable categories. Request generation of a 'Single Combo'. 3. Execution: Observe the generated 3-5 candidate combos. 4. Assertion: Check all generated candidate combos to verify if each one strictly and simultaneously contains: at least 1 Staple (≥0.1kg), at least 1 Protein (≥0.08kg), and at least 1 Vegetable (≥0.1kg).",
    "type": "unit_test",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv"
    ],
    "expected_output_files": null,
    "expected_output": "Unit test passes",
    "testcases": [
      {
        "test_command": "pytest evaluation/tests/test_combo_generator.py::test_combo_generation_nutrition_constraints",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.3.3a Suggested Selling Price - Basic Calculation",
    "description": "1. Precondition Check (User Path): Confirm combos can be successfully generated. 2. Preparation: Generate a combo, note its total cost. Set profit margin to 30%. 3. Execution: View the suggested selling price for this combo. 4. Assertion: Verify if the base selling price calculated by the system equals Cost * (1 + 0.3). Allow a 0.01 tolerance.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Suggested selling price is correctly calculated based on cost and profit margin",
    "testcases": [
      {
        "test_command": "cp evaluation/ingredients_for_test_2.3.2.csv src/data/ingredients.csv && python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.3.3b Suggested Selling Price - Constraints and Rounding",
    "description": "1. Precondition Check (User Path): Confirm combos can be generated and the base price can be calculated. 2. Preparation: A Single Combo has a calculated base price below the minimum price constraint of 28 RMB. 3. Execution: View the final displayed suggested selling price. 4. Assertion: Verify if the final price, after satisfying the minimum price constraint (≥28), is also rounded to the nearest integer.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Suggested selling price has undergone correct constraint application and rounding",
    "testcases": [
      {
        "test_command": "cp evaluation/ingredients_for_test_2.3.2.csv src/data/ingredients.csv && python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.4.1a Combo Evaluation - Profit Margin Calculation",
    "description": "1. Precondition Check (User Path): Confirm the candidate combo list can be successfully generated and displayed. 2. Preparation: Select any candidate combo, record its total cost C, selling price S, discount D (e.g., 0.9). 3. Execution: View the profit margin displayed by the system. 4. Assertion: Verify if the displayed profit margin equals the result of (S*D - C) / C (displayed as a percentage, allow 0.1% tolerance).",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Profit margin calculated correctly",
    "testcases": [
      {
        "test_command": "cp evaluation/ingredients_for_test_2.3.2.csv src/data/ingredients.csv && python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.4.1b Combo Evaluation - Nutrition Score Calculation",
    "description": "1. Precondition Check (User Path): Confirm the candidate combo list can be successfully generated and displayed. 2. Preparation: Select any candidate combo containing 4 distinct ingredient types. 3. Execution: View the nutrition score displayed by the system. 4. Assertion: Verify if its nutrition score equals 5 + (4 - 3) = 6 points.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Nutrition score calculated correctly",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.4.2a Result Output - Profit Margin Sorting",
    "description": "1. Precondition Check (User Path): Confirm the candidate combo list can be successfully generated and displayed. 2. Preparation: Generate at least 3 candidate combos. 3. Execution: View the generated candidate combo list. 4. Assertion: Verify if the list is strictly sorted in descending order based on 'Profit Margin'.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.3.1a.in"
    ],
    "expected_output_files": null,
    "expected_output": "Results sorted by profit margin from highest to lowest",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.4.2b Result Output - Tabular Display",
    "description": "1. Precondition Check (User Path): Confirm the candidate combo list can be successfully generated and displayed. 2. Preparation: Generate candidate combos. 3. Execution: View the generated candidate combo list. 4. Assertion: Verify if the entire list is displayed in a table format with borders and headers, containing at least 5 key data columns such as Combo Number, Cost, Selling Price, Profit Margin, Nutrition Score, and ensure data alignment.",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.3.2.csv",
      "evaluation/inputs_for_test_2.4.1.in"
    ],
    "expected_output_files": null,
    "expected_output": "Results displayed in a well-formatted table",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.3.1a.in",
        "test_input": null
      }
    ]
  },
  {
    "metric": "2.4.3 Combo Save Functionality",
    "description": "1. Precondition Check (User Path): Confirm the candidate combo list can be successfully generated and displayed. 2. Preparation: Within the generated candidate combo list, ensure a combo numbered '1' exists. 3. Execution: Follow prompts to input combo number '1' for saving. 4. Assertion: Verify if the program provides a clear save success prompt, and if the prompt includes the auto-generated combo name (e.g., 'Single Nutritious Combo 1').",
    "type": "shell_interaction",
    "input_files": [
      "evaluation/ingredients_for_test_2.4.3.csv",
      "evaluation/inputs_for_test_2.4.3.in"
    ],
    "expected_output_files": null,
    "expected_output": "Prompts successful combo save and displays the combo name",
    "testcases": [
      {
        "test_command": "python src/main.py < evaluation/inputs_for_test_2.4.3.in",
        "test_input": null
      }
    ]
  }
]
